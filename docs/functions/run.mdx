---
title: Run
description: Execute AI tasks with a single line of code
icon: play
---

The `run` function is the simplest way to execute AI tasks in Marvin. It provides a clean, one-line interface for running tasks while handling all the complexity of task creation and execution under the hood.

## Motivation

While Marvin provides powerful tools for complex AI workflows, many use cases are simple and don't need all that complexity. The `run` function provides:
- A simple, intuitive interface
- Sensible defaults
- Type safety through result types
- Easy access to common parameters

## Usage

```python
import marvin
from pydantic import BaseModel

class UserInfo(BaseModel):
    name: str
    age: int

# Extract structured data
user_details = marvin.run(
    "Extract user info from: 'John Doe is 30 years old.'",
    result_type=UserInfo
)
print(user_details)
# Expected output structure: UserInfo(name='John Doe', age=30)

# Structured output
# from pydantic import BaseModel # BaseModel is already imported

class Recipe(BaseModel):
    name: str
    ingredients: list[str]
    steps: list[str]

recipe = marvin.run(
    "Create a recipe for chocolate chip cookies",
    result_type=Recipe
)
print(recipe.name)
print(recipe.ingredients)
```

<Accordion title="Output">
```python
# UserInfo(name='John Doe', age=30)
# (LLM output can vary, the above is an example of the expected structure)
name='John Doe' age=30

Chocolate Chip Cookies
['1 cup unsalted butter, softened', '1 cup white sugar', '1 cup packed brown sugar', '2 large eggs', '2 teaspoons vanilla extract', '3 cups all-purpose flour', '1 teaspoon baking soda', '1/2 teaspoon baking powder', '1/2 teaspoon salt', '2 cups semisweet chocolate chips']
```
</Accordion>

## Parameters

- `instructions`: What you want the AI to do
- `result_type`: The expected type of the result (defaults to `str`)
- `tools`: Optional list of functions the AI can use
- `thread`: Optional thread for conversation context
- `agents`: Optional list of agents to use
- `raise_on_failure`: Whether to raise exceptions on failure (defaults to `True`)
- `handlers`: Optional list of handlers for events
- `**kwargs`: Additional context passed to the task

## Async Support

The function is also available in an async version:

```python
import marvin
import asyncio

async def main():
    # Run a task asynchronously
    result = await marvin.run_async(
        "Translate 'hello' to French",
        result_type=str
    )
    print(result)

asyncio.run(main()) # bonjour
```


## Examples

### Simple Text Tasks

```python
import marvin
from pydantic import BaseModel # Should be imported already

class EventDetails(BaseModel):
    event_name: str
    date: str
    location: str

# Extract structured information
event_info_text = "The Tech Conference 2024 will be held on December 5th in San Francisco."
event_data = marvin.run(
    f"Extract event details from: {event_info_text}",
    result_type=EventDetails
)
print(event_data)
# Expected output structure: EventDetails(event_name='Tech Conference 2024', date='December 5th', location='San Francisco')

class MeetingInfo(BaseModel):
    topic: str
    attendees: list[str] # Changed from List[str]

# Process a query into structured data
query = "Schedule a meeting about the Q3 budget with Alice and Bob."
meeting = marvin.run(
    f"Extract meeting details from the query: {query}",
    result_type=MeetingInfo
)
print(meeting)
# Expected output structure: MeetingInfo(topic='Q3 budget', attendees=['Alice', 'Bob'])
```

### Using Tools

```python
import marvin
import os # Add this import

# Define a simple tool
def file_exists(filepath: str) -> bool:
    '''Checks if a file exists at the given path.'''
    return os.path.exists(filepath)

# Create a dummy file for the example to succeed
if not os.path.exists("example_doc.txt"):
    with open("example_doc.txt", "w") as f:
        f.write("Hello Marvin!")

# Let the AI use the tool
file_status = marvin.run(
    "Is there a file named 'example_doc.txt' in the current directory?",
    result_type=str, # Or bool, but string allows for more natural LLM response
    tools=[file_exists]
)
print(file_status)
# Expected output could be: "Yes, the file 'example_doc.txt' exists." or similar

# Clean up the dummy file
if os.path.exists("example_doc.txt"):
    os.remove("example_doc.txt")
```

### Structured Output

```python
import marvin
from pydantic import BaseModel, Field

class MovieReview(BaseModel):
    title: str
    rating: float = Field(gt=0, lt=5)
    pros: list[str]
    cons: list[str]

# Get structured review
review = marvin.run(
    "Review the movie 'The Matrix'",
    result_type=MovieReview
)
print(review.rating)  # 4.8
print(review.pros)    # ["Groundbreaking special effects", "Deep philosophical themes"]
```


### Using Context

```python
import marvin

# Provide additional context
summary = marvin.run(
    "Summarize this data in 2-3 sentences",
    context={
        "data": "Long text to summarize...",
        "style": "technical"
    }
)
print(summary)
```

### Multiple Tasks

The `run_tasks` function allows you to run multiple tasks at once:

```python
import marvin # Should be imported

# Create practical tasks
task1 = marvin.Task(
    instructions="Draft a catchy subject line for an email announcing a new feature: 'AI-Powered Analytics'.",
    result_type=str
)
task2 = marvin.Task(
    instructions="Based on the subject line from the previous task, write a brief opening sentence for the email.",
    # This task would typically take context from task1 in a real scenario,
    # but for simplicity here, we'll keep them independent for run_tasks.
    # For dependent tasks, see marvin.Thread or sequential marvin.run calls.
    result_type=str
)

# Run them together
task_outputs = marvin.run_tasks([task1, task2])
print(f"Subject: {task_outputs[0].result}")
print(f"Opening: {task_outputs[1].result}")
# Expected output:
# Subject: Unleash the Power of AI-Powered Analytics!
# Opening: Get ready to revolutionize your data insights with our brand new AI-Powered Analytics feature.
```

### Async Multiple Tasks

```python
import marvin # Should be imported
import asyncio # Should be imported

async def main():
    # Run multiple tasks asynchronously
    tasks_async = await marvin.run_tasks_async(
        [
            marvin.Task("Draft a catchy subject line for an email announcing a new feature: 'AI-Powered Analytics'."),
            marvin.Task("Based on a subject about 'AI-Powered Analytics', write a brief opening sentence for the email.")
        ]
    )
    for i, task_output in enumerate(tasks_async):
        print(f"Output {i+1}: {task_output.result}")

# asyncio.run(main()) # Comment out or ensure it's handled if run in a script
```